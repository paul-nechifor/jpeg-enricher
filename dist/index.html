<!DOCTYPE html><html lang="ro"><head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><title>JPEG Enricher</title><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="apple-touch-icon" href="/favicon152.png"><link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700|Open+Sans+Condensed:300,300italic,700&amp;subset=latin,latin-ext"><link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"><style>body{font-family:'Open Sans',"Helvetica Neue",Helvetica,Arial,sans-serif;padding:0}body,label{font-size:16px}body,li,h1,h2,h3{line-height:1.4}p,li,ul,ol{margin-bottom:1em}a:hover{text-decoration:none;border-bottom:1px solid #a4c1d3;}a:hover.hide-link{color:#08c}a.hide-link{color:#333}h1,h2,h3,h4,h5,h6{font-family:'Open Sans Condensed',"Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:300;margin:0}h1{text-align:center;font-size:56px;}h1 a{color:#333;}h1 a:hover{text-decoration:none;border:0;color:#08c}header{margin:0 0 25px 0}footer{margin-top:45px;padding-bottom:10px;text-align:center;font-size:16px;padding-top:10px}@media only screen and (min-width:768px){header,.readable,footer{width:600px;margin-left:auto;margin-right:auto}}@media only screen and (min-width:480px) and (max-width:767px){header,.readable,footer{max-width:600px;padding:0 10px;margin-left:auto;margin-right:auto}}@media only screen and (max-width:479px){header,.readable,footer{padding:0 8px}body,label{font-size:14px}h1{font-size:36px}h2{font-size:29px}h3{font-size:22px}header{margin:0 0 5px 0}footer{font-size:14px}}#original-image-container{display:block;margin:0 auto;max-width:none;overflow:hidden}#original-image{display:block;max-width:none;margin:0 auto}</style></head><body><header><h1><a href=".">JPEG Enricher</a></h1></header><div class="readable"><p>Are you sick of people who save screenshots as PNG images thereby making text too easy to read? This tool solves that problem by allowing you to enrich images with as many JPEG artefacts as you like.</p><form class="form-horizontal"><div class="form-group"><label class="control-label col-sm-4" for="file">Select image</label><div class="controls col-sm-8"><input class="form-control" id="file" type="file" data-content="Select image"></div></div><div class="form-group"><label class="control-label col-sm-4" for="quality">Quality</label><div class="controls col-sm-8"><input class="form-control" id="quality" type="text" data-content="JPEG image quality (lower is better)."></div></div><div class="form-group"><label class="control-label col-sm-4" for="repetitions">Repetitions</label><div class="controls col-sm-8"><input class="form-control" id="repetitions" type="text" data-content="Number of times to repeat the saving process."></div></div><div class="form-group"><label class="control-label col-sm-4" for="shakiness">Shakiness</label><div class="controls col-sm-8"><input class="form-control" id="shakiness" type="text" data-content="By how many pixels to shake the image. This is necessary to bring out the artefacts."></div></div><div class="form-group"><div class="col-sm-8 col-sm-offset-4"><button class="btn btn-info" id="enrich" type="button"><span class="glyphicon glyphicon-ok"></span><span class="text"> Enrich</span></button></div></div></form></div><div id="original-image-container"><img id="original-image" src="image.png" alt=""></div><footer><p class="text-center">Created by <a href="/">Paul Nechifor</a>.</p></footer><script src="//code.jquery.com/jquery-1.10.2.min.js"></script><script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script><script>!function(t){function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var e={};return r.m=t,r.c=e,r.p="",r(0)}([function(t,r,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function o(t){return t<26?t+65:t<52?t+71:t<62?t-4:62===t?43:63===t?47:65}function a(t){for(var r=2,e="",n=t.length,i=0,a=0;a<n;)r=a%3,a>0&&4*a/3%76===0&&(e+="\r\n"),i|=t[a]<<(16>>>r&24),2!==r&&t.length-a!==1||(e+=String.fromCharCode(o(i>>>18&63),o(i>>>12&63),o(i>>>6&63),o(63&i)),i=0),a++;return e.substr(0,e.length-2+r)+(2===r?"":1===r?"=":"==")}var s=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),f=e(1),u=n(f);$(document).ready(function(){if(!window.File||!window.FileList||!window.FileReader)return void alert("No HTML5 Upload. Get a new browser.");var t=new h;return t.setup()});var h=function(){function t(){i(this,t),this.qualityInput=document.getElementById("quality"),this.repetitionsInput=document.getElementById("repetitions"),this.shakinessInput=document.getElementById("shakiness"),this.enrichBtn=$("#enrich"),this.imageContainer=$("#original-image-container"),this.originalImage=document.getElementById("original-image"),this.orgWidth=this.originalImage.width,this.orgHeight=this.originalImage.height,this.fileInput=document.getElementById("file"),this.quality=20,this.repetitions=100,this.shakiness=1,this.originalImageSrc=null,this.buttonIsEnrich=!0,this.continueReps=!1}return s(t,[{key:"setup",value:function(){var t=this,r={placement:"top",trigger:"focus"};$("#quality").popover(r).val(this.quality),$("#repetitions").popover(r).val(this.repetitions),$("#shakiness").popover(r).val(this.shakiness),this.fileInput.onchange=this.processFilesChange.bind(this),this.enrichBtn.click(function(){return t.enrichClicked()}),this.resetContainerSize()}},{key:"resetContainerSize",value:function(){this.imageContainer.css({width:this.orgWidth+"px",height:this.orgHeight+"px"})}},{key:"processFilesChange",value:function(){var t=this,r=this.fileInput.files;if(0!==r.length){var e=r[0];if(e.type.match("image.*")){var n=new FileReader;n.onload=function(r){return t.originalImageSrc=r.target.result,t.originalImage.src=t.originalImageSrc,t.orgWidth=t.originalImage.width,t.orgHeight=t.originalImage.height,t.resetContainerSize()},n.readAsDataURL(e)}}}},{key:"setButtonType",value:function(t){this.buttonIsEnrich!==t&&(this.buttonIsEnrich=t,this.buttonIsEnrich?(this.enrichBtn.removeClass("btn-danger"),this.enrichBtn.addClass("btn-info"),this.enrichBtn.find(".glyphicon").attr("class","glyphicon glyphicon-ok"),this.enrichBtn.find(".text").text(" Enrich")):(this.enrichBtn.removeClass("btn-info"),this.enrichBtn.addClass("btn-danger"),this.enrichBtn.find(".glyphicon").attr("class","glyphicon glyphicon-remove"),this.enrichBtn.find(".text").text(" Stop")))}},{key:"enrichClicked",value:function(){var t=this;this.buttonIsEnrich?(this.continueReps=!0,this.readNumbers(),this.setButtonType(!1),this.enrichImage(function(r){var e=r+" / "+t.repetitions;return t.repetitionsInput.value=e,t.continueReps},function(r,e){return t.repetitionsInput.value=t.repetitions,t.setButtonType(!0)})):this.continueReps=!1}},{key:"readNumbers",value:function(){var t=Math.floor(Number(this.qualityInput.value)),r=Math.floor(Number(this.repetitionsInput.value)),e=Math.floor(Number(this.shakinessInput.value));t>=1&&t<=100&&(this.quality=t),r>=1&&(this.repetitions=r),e>=0&&(this.shakiness=e),this.qualityInput.value=this.quality,this.repetitionsInput.value=this.repetitions,this.shakinessInput.value=this.shakiness}},{key:"enrichImage",value:function(t,r){var e=this,n=document.createElement("canvas");n.width=this.originalImage.width+this.shakiness,n.height=this.originalImage.height+this.shakiness;var i=n.getContext("2d"),o=0,s=0,f=0,h=function h(){var c=Math.floor(Math.random()*(e.shakiness+1)),l=Math.floor(Math.random()*(e.shakiness+1));i.drawImage(e.originalImage,s,f,e.originalImage.width-s,e.originalImage.height-f,c,l,e.originalImage.width-s,e.originalImage.height-f),s=c,f=l;var p=i.getImageData(0,0,n.width,n.height),g=u.default.encode(p,e.quality),v=a(g.data);e.originalImage.src="data:image/jpeg;base64,"+v;var d=i.createImageData(g.width,g.height);d.data.set(g.data),i.putImageData(d,0,0),e.originalImage.style.marginLeft=-c+"px",e.originalImage.style.marginTop=-l+"px";var y=t(o);o++,y&&o<e.repetitions?setTimeout(h,0):r(s,f)};h()}}]),t}()},function(t,r,e){var n=e(2),i=e(7);t.exports={encode:n,decode:i}},function(t,r,e){(function(r){function e(t){function e(t){for(var r=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],e=0;e<64;e++){var n=T((r[e]*t+50)/100);n<1?n=1:n>255&&(n=255),P[z[e]]=n}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var a=T((i[o]*t+50)/100);a<1?a=1:a>255&&(a=255),_[z[o]]=a}for(var s=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],f=0,u=0;u<8;u++)for(var h=0;h<8;h++)B[f]=1/(P[z[f]]*s[u]*s[h]*8),k[f]=1/(_[z[f]]*s[u]*s[h]*8),f++}function n(t,r){for(var e=0,n=0,i=new Array,o=1;o<=16;o++){for(var a=1;a<=t[o];a++)i[r[n]]=[],i[r[n]][0]=e,i[r[n]][1]=o,n++,e++;e*=2}return i}function i(){b=n(F,j),A=n(V,G),E=n(H,$),I=n(W,J)}function o(){for(var t=1,r=2,e=1;e<=15;e++){for(var n=t;n<r;n++)C[32767+n]=e,U[32767+n]=[],U[32767+n][1]=e,U[32767+n][0]=n;for(var i=-(r-1);i<=-t;i++)C[32767+i]=e,U[32767+i]=[],U[32767+i][1]=e,U[32767+i][0]=r-1+i;t<<=1,r<<=1}}function a(){for(var t=0;t<256;t++)q[t]=19595*t,q[t+256>>0]=38470*t,q[t+512>>0]=7471*t+32768,q[t+768>>0]=-11059*t,q[t+1024>>0]=-21709*t,q[t+1280>>0]=32768*t+8421375,q[t+1536>>0]=-27439*t,q[t+1792>>0]=-5329*t}function s(t){for(var r=t[0],e=t[1]-1;e>=0;)r&1<<e&&(L|=1<<M),e--,M--,M<0&&(255==L?(f(255),f(0)):f(L),M=7,L=0)}function f(t){x.push(t)}function u(t){f(t>>8&255),f(255&t)}function h(t,r){var e,n,i,o,a,s,f,u,h,c=0;const l=8,p=64;for(h=0;h<l;++h){e=t[c],n=t[c+1],i=t[c+2],o=t[c+3],a=t[c+4],s=t[c+5],f=t[c+6],u=t[c+7];var g=e+u,v=e-u,d=n+f,y=n-f,w=i+s,m=i-s,b=o+a,A=o-a,E=g+b,I=g-b,R=d+w,T=d-w;t[c]=E+R,t[c+4]=E-R;var P=.707106781*(T+I);t[c+2]=I+P,t[c+6]=I-P,E=A+m,R=m+y,T=y+v;var _=.382683433*(E-T),B=.5411961*E+_,k=1.306562965*T+_,U=.707106781*R,C=v+U,Y=v-U;t[c+5]=Y+B,t[c+3]=Y-B,t[c+1]=C+k,t[c+7]=C-k,c+=8}for(c=0,h=0;h<l;++h){e=t[c],n=t[c+8],i=t[c+16],o=t[c+24],a=t[c+32],s=t[c+40],f=t[c+48],u=t[c+56];var x=e+u,L=e-u,M=n+f,D=n-f,O=i+s,N=i-s,X=o+a,q=o-a,z=x+X,F=x-X,j=M+O,H=M-O;t[c]=z+j,t[c+32]=z-j;var $=.707106781*(H+F);t[c+16]=F+$,t[c+48]=F-$,z=q+N,j=N+D,H=D+L;var V=.382683433*(z-H),G=.5411961*z+V,W=1.306562965*H+V,J=.707106781*j,Q=L+J,Z=L-J;t[c+40]=Z+G,t[c+24]=Z-G,t[c+8]=Q+W,t[c+56]=Q-W,c++}var K;for(h=0;h<p;++h)K=t[h]*r[h],S[h]=K>0?K+.5|0:K-.5|0;return S}function c(){u(65504),u(16),f(74),f(70),f(73),f(70),f(0),f(1),f(1),f(0),u(1),u(1),f(0),f(0)}function l(t,r){u(65472),u(17),f(8),u(r),u(t),f(3),f(1),f(17),f(0),f(2),f(17),f(1),f(3),f(17),f(1)}function p(){u(65499),u(132),f(0);for(var t=0;t<64;t++)f(P[t]);f(1);for(var r=0;r<64;r++)f(_[r])}function g(){u(65476),u(418),f(0);for(var t=0;t<16;t++)f(F[t+1]);for(var r=0;r<=11;r++)f(j[r]);f(16);for(var e=0;e<16;e++)f(H[e+1]);for(var n=0;n<=161;n++)f($[n]);f(1);for(var i=0;i<16;i++)f(V[i+1]);for(var o=0;o<=11;o++)f(G[o]);f(17);for(var a=0;a<16;a++)f(W[a+1]);for(var s=0;s<=161;s++)f(J[s])}function v(){u(65498),u(12),f(3),f(1),f(0),f(2),f(17),f(3),f(17),f(0),f(63),f(0)}function d(t,r,e,n,i){var o,a=i[0],f=i[240];const u=16,c=63,l=64;for(var p=h(t,r),g=0;g<l;++g)Y[z[g]]=p[g];var v=Y[0]-e;e=Y[0],0==v?s(n[0]):(o=32767+v,s(n[C[o]]),s(U[o]));for(var d=63;d>0&&0==Y[d];d--);if(0==d)return s(a),e;for(var y,w=1;w<=d;){for(var m=w;0==Y[w]&&w<=d;++w);var b=w-m;if(b>=u){y=b>>4;for(var A=1;A<=y;++A)s(f);b&=15}o=32767+Y[w],s(i[(b<<4)+C[o]]),s(U[o]),w++}return d!=c&&s(a),e}function y(){for(var t=String.fromCharCode,r=0;r<256;r++)X[r]=t(r)}function w(t){if(t<=0&&(t=1),t>100&&(t=100),R!=t){var r=0;r=t<50?Math.floor(5e3/t):Math.floor(200-2*t),e(r),R=t}}function m(){var r=(new Date).getTime();t||(t=50),y(),i(),o(),a(),w(t);(new Date).getTime()-r}var b,A,E,I,R,T=(Math.round,Math.floor),P=new Array(64),_=new Array(64),B=new Array(64),k=new Array(64),U=new Array(65535),C=new Array(65535),S=new Array(64),Y=new Array(64),x=[],L=0,M=7,D=new Array(64),O=new Array(64),N=new Array(64),X=new Array(256),q=new Array(2048),z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],F=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],$=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],V=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],J=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(t,e){(new Date).getTime();e&&w(e),x=new Array,L=0,M=7,u(65496),c(),p(),l(t.width,t.height),g(),v();var n=0,i=0,o=0;L=0,M=7,this.encode.displayName="_encode_";for(var a,f,h,y,m,R,T,P,_,U=t.data,C=t.width,S=t.height,Y=4*C,X=0;X<S;){for(a=0;a<Y;){for(m=Y*X+a,R=m,T=-1,P=0,_=0;_<64;_++)P=_>>3,T=4*(7&_),R=m+P*Y+T,X+P>=S&&(R-=Y*(X+1+P-S)),a+T>=Y&&(R-=a+T-Y+4),f=U[R++],h=U[R++],y=U[R++],D[_]=(q[f]+q[h+256>>0]+q[y+512>>0]>>16)-128,O[_]=(q[f+768>>0]+q[h+1024>>0]+q[y+1280>>0]>>16)-128,N[_]=(q[f+1280>>0]+q[h+1536>>0]+q[y+1792>>0]>>16)-128;n=d(D,B,n,b,E),i=d(O,k,i,A,I),o=d(N,k,o,A,I),a+=32}X+=8}if(M>=0){var z=[];z[1]=M+1,z[0]=(1<<M+1)-1,s(z)}return u(65497),new r(x)},m()}function n(t,r){"undefined"==typeof r&&(r=50);var n=new e(r),i=n.encode(t,r);return{data:i,width:t.width,height:t.height}}t.exports=n}).call(r,e(3).Buffer)},function(t,r,e){(function(t){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function n(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,r){if(i()<r)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r),t.__proto__=a.prototype):(null===t&&(t=new a(r)),t.length=r),t}function a(t,r,e){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?p(t,r,e,n):"string"==typeof r?c(t,r,e):g(t,r)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,r,e,n){return f(r),r<=0?o(t,r):void 0!==e?"string"==typeof n?o(t,r).fill(e,n):o(t,r).fill(e):o(t,r)}function h(t,r){if(f(r),t=o(t,r<0?0:0|v(r)),!a.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function c(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!a.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|y(r,e);t=o(t,n);var i=t.write(r,e);return i!==n&&(t=t.slice(0,i)),t}function l(t,r){var e=r.length<0?0:0|v(r.length);t=o(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function p(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),a.TYPED_ARRAY_SUPPORT?(t=r,t.__proto__=a.prototype):t=l(t,r),t}function g(t,r){if(a.isBuffer(r)){var e=0|v(r.length);return t=o(t,e),0===t.length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||J(r.length)?o(t,0):l(t,r);if("Buffer"===r.type&&K(r.data))return l(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),a.alloc(+t)}function y(t,r){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return G(t).length;default:if(n)return H(t).length;r=(""+r).toLowerCase(),n=!0}}function w(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if(e>>>=0,r>>>=0,e<=r)return"";for(t||(t="utf8");;)switch(t){case"hex":return Y(this,r,e);case"utf8":case"utf-8":return k(this,r,e);case"ascii":return C(this,r,e);case"latin1":case"binary":return S(this,r,e);case"base64":return B(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function m(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function b(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=a.from(r,n)),a.isBuffer(r))return 0===r.length?-1:A(t,r,e,n,i);if("number"==typeof r)return r&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):A(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function A(t,r,e,n,i){function o(t,r){return 1===a?t[r]:t.readUInt16BE(r*a)}var a=1,s=t.length,f=r.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;a=2,s/=2,f/=2,e/=2}var u;if(i){var h=-1;for(u=e;u<s;u++)if(o(t,u)===o(r,h===-1?0:u-h)){if(h===-1&&(h=u),u-h+1===f)return h*a}else h!==-1&&(u-=u-h),h=-1}else for(e+f>s&&(e=s-f),u=e;u>=0;u--){for(var c=!0,l=0;l<f;l++)if(o(t,u+l)!==o(r,l)){c=!1;break}if(c)return u}return-1}function E(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n),n>i&&(n=i)):n=i;var o=r.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(r.substr(2*a,2),16);if(isNaN(s))return a;t[e+a]=s}return a}function I(t,r,e,n){return W(H(r,t.length-e),t,e,n)}function R(t,r,e,n){return W($(r),t,e,n)}function T(t,r,e,n){return R(t,r,e,n)}function P(t,r,e,n){return W(G(r),t,e,n)}function _(t,r,e,n){return W(V(r,t.length-e),t,e,n)}function B(t,r,e){return 0===r&&e===t.length?Q.fromByteArray(t):Q.fromByteArray(t.slice(r,e))}function k(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=e){var f,u,h,c;switch(s){case 1:o<128&&(a=o);break;case 2:f=t[i+1],128===(192&f)&&(c=(31&o)<<6|63&f,c>127&&(a=c));break;case 3:f=t[i+1],u=t[i+2],128===(192&f)&&128===(192&u)&&(c=(15&o)<<12|(63&f)<<6|63&u,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:f=t[i+1],u=t[i+2],h=t[i+3],128===(192&f)&&128===(192&u)&&128===(192&h)&&(c=(15&o)<<18|(63&f)<<12|(63&u)<<6|63&h,c>65535&&c<1114112&&(a=c))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return U(n)}function U(t){var r=t.length;if(r<=tt)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=tt));return e}function C(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function S(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function Y(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=j(t[o]);return i}function x(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function L(t,r,e){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function M(t,r,e,n,i,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function D(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function O(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function N(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function X(t,r,e,n,i){return i||N(t,r,e,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(t,r,e,n,23,4),e+4}function q(t,r,e,n,i){return i||N(t,r,e,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(t,r,e,n,52,8),e+8}function z(t){if(t=F(t).replace(rt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function F(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function j(t){return t<16?"0"+t.toString(16):t.toString(16)}function H(t,r){r=r||1/0;for(var e,n=t.length,i=null,o=[],a=0;a<n;++a){if(e=t.charCodeAt(a),e>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=(i-55296<<10|e-56320)+65536}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function $(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function V(t,r){for(var e,n,i,o=[],a=0;a<t.length&&!((r-=2)<0);++a)e=t.charCodeAt(a),n=e>>8,i=e%256,o.push(i),o.push(n);return o}function G(t){return Q.toByteArray(z(t))}function W(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function J(t){return t!==t}var Q=e(4),Z=e(5),K=e(6);r.Buffer=a,r.SlowBuffer=d,r.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:n(),r.kMaxLength=i(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,r,e){return s(null,t,r,e)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,r,e){return u(null,t,r,e)},a.allocUnsafe=function(t){return h(null,t)},a.allocUnsafeSlow=function(t){return h(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,r){if(!a.isBuffer(t)||!a.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,r){if(!K(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var n=a.allocUnsafe(r),i=0;for(e=0;e<t.length;++e){var o=t[e];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},a.byteLength=y,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)m(this,r,r+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)m(this,r,r+3),m(this,r+1,r+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)m(this,r,r+7),m(this,r+1,r+6),m(this,r+2,r+5),m(this,r+3,r+4);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):w.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,r,e,n,i){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(r>>>=0,e>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var o=i-n,s=e-r,f=Math.min(o,s),u=this.slice(n,i),h=t.slice(r,e),c=0;c<f;++c)if(u[c]!==h[c]){o=u[c],s=h[c];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,r,e){return this.indexOf(t,r,e)!==-1},a.prototype.indexOf=function(t,r,e){return b(this,t,r,e,!0)},a.prototype.lastIndexOf=function(t,r,e){return b(this,t,r,e,!1)},a.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return E(this,t,r,e);case"utf8":case"utf-8":return I(this,t,r,e);case"ascii":return R(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return P(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;a.prototype.slice=function(t,r){var e=this.length;t=~~t,r=void 0===r?e:~~r,t<0?(t+=e,t<0&&(t=0)):t>e&&(t=e),r<0?(r+=e,r<0&&(r=0)):r>e&&(r=e),r<t&&(r=t);var n;if(a.TYPED_ARRAY_SUPPORT)n=this.subarray(t,r),n.__proto__=a.prototype;else{var i=r-t;n=new a(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},a.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||L(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},a.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||L(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},a.prototype.readUInt8=function(t,r){return r||L(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,r){return r||L(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,r){return r||L(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,r){return r||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,r){return r||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||L(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*r)),n},a.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||L(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*r)),o},a.prototype.readInt8=function(t,r){return r||L(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},a.prototype.readInt16LE=function(t,r){r||L(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},a.prototype.readInt16BE=function(t,r){r||L(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},a.prototype.readInt32LE=function(t,r){return r||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,r){return r||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,r){return r||L(t,4,this.length),Z.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,r){return r||L(t,4,this.length),Z.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,r){return r||L(t,8,this.length),Z.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,r){return r||L(t,8,this.length),Z.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,r,e,n){if(t=+t,r|=0,e|=0,!n){var i=Math.pow(2,8*e)-1;M(this,t,r,e,i,0)}var o=1,a=0;for(this[r]=255&t;++a<e&&(o*=256);)this[r+a]=t/o&255;return r+e},a.prototype.writeUIntBE=function(t,r,e,n){if(t=+t,r|=0,e|=0,!n){var i=Math.pow(2,8*e)-1;M(this,t,r,e,i,0)}var o=e-1,a=1;for(this[r+o]=255&t;--o>=0&&(a*=256);)this[r+o]=t/a&255;return r+e},a.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||M(this,t,r,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},a.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||M(this,t,r,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):D(this,t,r,!0),r+2},a.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||M(this,t,r,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):D(this,t,r,!1),r+2},a.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||M(this,t,r,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):O(this,t,r,!0),r+4},a.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||M(this,t,r,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):O(this,t,r,!1),r+4},a.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);M(this,t,r,e,i-1,-i)}var o=0,a=1,s=0;for(this[r]=255&t;++o<e&&(a*=256);)t<0&&0===s&&0!==this[r+o-1]&&(s=1),this[r+o]=(t/a>>0)-s&255;return r+e},a.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);M(this,t,r,e,i-1,-i)}var o=e-1,a=1,s=0;for(this[r+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[r+o+1]&&(s=1),this[r+o]=(t/a>>0)-s&255;return r+e},a.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||M(this,t,r,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},a.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||M(this,t,r,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):D(this,t,r,!0),r+2},a.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||M(this,t,r,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):D(this,t,r,!1),r+2},a.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||M(this,t,r,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):O(this,t,r,!0),r+4},a.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||M(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):O(this,t,r,!1),r+4},a.prototype.writeFloatLE=function(t,r,e){return X(this,t,r,!0,e)},a.prototype.writeFloatBE=function(t,r,e){return X(this,t,r,!1,e)},a.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},a.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},a.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},a.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0);var o;if("number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var s=a.isBuffer(t)?t:H(new a(t,n).toString()),f=s.length;for(o=0;o<e-r;++o)this[o+r]=s[o%f]}return this};var rt=/[^+\/0-9A-Za-z-_]/g}).call(r,function(){return this}())},function(t,r){"use strict";function e(t){var r=t.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[r-2]?2:"="===t[r-1]?1:0}function n(t){return 3*t.length/4-e(t)}function i(t){var r,n,i,o,a,s=t.length;o=e(t),a=new h(3*s/4-o),n=o>0?s-4:s;var f=0;for(r=0;r<n;r+=4)i=u[t.charCodeAt(r)]<<18|u[t.charCodeAt(r+1)]<<12|u[t.charCodeAt(r+2)]<<6|u[t.charCodeAt(r+3)],a[f++]=i>>16&255,a[f++]=i>>8&255,a[f++]=255&i;return 2===o?(i=u[t.charCodeAt(r)]<<2|u[t.charCodeAt(r+1)]>>4,a[f++]=255&i):1===o&&(i=u[t.charCodeAt(r)]<<10|u[t.charCodeAt(r+1)]<<4|u[t.charCodeAt(r+2)]>>2,a[f++]=i>>8&255,a[f++]=255&i),a}function o(t){return f[t>>18&63]+f[t>>12&63]+f[t>>6&63]+f[63&t]}function a(t,r,e){for(var n,i=[],a=r;a<e;a+=3)n=(t[a]<<16)+(t[a+1]<<8)+t[a+2],i.push(o(n));return i.join("")}function s(t){for(var r,e=t.length,n=e%3,i="",o=[],s=16383,u=0,h=e-n;u<h;u+=s)o.push(a(t,u,u+s>h?h:u+s));return 1===n?(r=t[e-1],i+=f[r>>2],i+=f[r<<4&63],i+="=="):2===n&&(r=(t[e-2]<<8)+t[e-1],i+=f[r>>10],i+=f[r>>4&63],i+=f[r<<2&63],i+="="),o.push(i),o.join("")}r.byteLength=n,r.toByteArray=i,r.fromByteArray=s;for(var f=[],u=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,p=c.length;l<p;++l)f[l]=c[l],u[c.charCodeAt(l)]=l;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},function(t,r){r.read=function(t,r,e,n,i){var o,a,s=8*i-n-1,f=(1<<s)-1,u=f>>1,h=-7,c=e?i-1:0,l=e?-1:1,p=t[r+c];for(c+=l,o=p&(1<<-h)-1,p>>=-h,h+=s;h>0;o=256*o+t[r+c],c+=l,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=n;h>0;a=256*a+t[r+c],c+=l,h-=8);if(0===o)o=1-u;else{if(o===f)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,n),o-=u}return(p?-1:1)*a*Math.pow(2,o-n)},r.write=function(t,r,e,n,i,o){var a,s,f,u=8*o-i-1,h=(1<<u)-1,c=h>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,g=n?1:-1,v=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(s=isNaN(r)?1:0,a=h):(a=Math.floor(Math.log(r)/Math.LN2),r*(f=Math.pow(2,-a))<1&&(a--,f*=2),r+=a+c>=1?l/f:l*Math.pow(2,1-c),r*f>=2&&(a++,f/=2),a+c>=h?(s=0,a=h):a+c>=1?(s=(r*f-1)*Math.pow(2,i),a+=c):(s=r*Math.pow(2,c-1)*Math.pow(2,i),a=0));i>=8;t[e+p]=255&s,p+=g,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[e+p]=255&a,p+=g,a/=256,u-=8);t[e+p-g]|=128*v}},function(t,r){var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},function(t,r,e){(function(r){function e(t){var e=new Uint8Array(t),i=new n;i.parse(e);for(var o=i.getData(i.width,i.height),a=new r(i.width*i.height*4),s=0,f=0;f<a.length;f++)a[f+(f/3|0)]=o[s++],f%4==3&&(a[f]=255);return{data:a,width:i.width,height:i.height}}var n=function(){"use strict";function t(){}function r(t,r){for(var e,n,i=0,o=[],a=16;a>0&&!t[a-1];)a--;o.push({children:[],index:0});var s,f=o[0];for(e=0;e<a;e++){for(n=0;n<t[e];n++){for(f=o.pop(),f.children[f.index]=r[i];f.index>0;)f=o.pop();for(f.index++,o.push(f);o.length<=e;)o.push(s={children:[],index:0}),f.children[f.index]=s.children,f=s;i++}e+1<a&&(o.push(s={children:[],index:0}),f.children[f.index]=s.children,f=s)}return o[0].children}function e(t,r,e,n,i,a,s,f,u){function h(){if(S>0)return S--,C>>S&1;if(C=t[r++],255==C){var e=t[r++];if(e)throw"unexpected marker: "+(C<<8|e).toString(16)}return S=7,C>>>7}function c(t){for(var r,e=t;null!==(r=h());){if(e=e[r],"number"==typeof e)return e;if("object"!=typeof e)throw"invalid huffman sequence"}return null}function l(t){for(var r=0;t>0;){var e=h();if(null===e)return;r=r<<1|e,t--}return r}function p(t){var r=l(t);return r>=1<<t-1?r:r+(-1<<t)+1}function g(t,r){var e=c(t.huffmanTableDC),n=0===e?0:p(e);r[0]=t.pred+=n;for(var i=1;i<64;){var a=c(t.huffmanTableAC),s=15&a,f=a>>4;if(0!==s){i+=f;var u=o[i];r[u]=p(s),i++}else{if(f<15)break;i+=16}}}function v(t,r){var e=c(t.huffmanTableDC),n=0===e?0:p(e)<<u;r[0]=t.pred+=n}function d(t,r){r[0]|=h()<<u}function y(t,r){if(Y>0)return void Y--;for(var e=a,n=s;e<=n;){var i=c(t.huffmanTableAC),f=15&i,h=i>>4;if(0!==f){e+=h;var g=o[e];r[g]=p(f)*(1<<u),e++}else{if(h<15){Y=l(h)+(1<<h)-1;break}e+=16}}}function w(t,r){for(var e=a,n=s,i=0;e<=n;){var f=o[e];switch(x){case 0:var g=c(t.huffmanTableAC),v=15&g,i=g>>4;if(0===v)i<15?(Y=l(i)+(1<<i),x=4):(i=16,x=1);else{if(1!==v)throw"invalid ACn encoding";A=p(v),x=i?2:3}continue;case 1:case 2:r[f]?r[f]+=h()<<u:(i--,0===i&&(x=2==x?3:0));break;case 3:r[f]?r[f]+=h()<<u:(r[f]=A<<u,x=0);break;case 4:r[f]&&(r[f]+=h()<<u)}e++}4===x&&(Y--,0===Y&&(x=0))}function m(t,r,e,n,i){var o=e/B|0,a=e%B,s=o*t.v+n,f=a*t.h+i;r(t,t.blocks[s][f])}function b(t,r,e){var n=e/t.blocksPerLine|0,i=e%t.blocksPerLine;r(t,t.blocks[n][i])}var A,E,I,R,T,P,_,B=(e.precision,e.samplesPerLine,e.scanLines,e.mcusPerLine),k=e.progressive,U=(e.maxH,e.maxV,r),C=0,S=0,Y=0,x=0,L=n.length;_=k?0===a?0===f?v:d:0===f?y:w:g;var M,D,O=0;D=1==L?n[0].blocksPerLine*n[0].blocksPerColumn:B*e.mcusPerColumn,i||(i=D);for(var N,X;O<D;){for(I=0;I<L;I++)n[I].pred=0;if(Y=0,1==L)for(E=n[0],P=0;P<i;P++)b(E,_,O),O++;else for(P=0;P<i;P++){for(I=0;I<L;I++)for(E=n[I],N=E.h,X=E.v,R=0;R<X;R++)for(T=0;T<N;T++)m(E,_,O,R,T);if(O++,O===D)break}if(S=0,M=t[r]<<8|t[r+1],M<65280)throw"marker was not found";if(!(M>=65488&&M<=65495))break;r+=2}return r-U}function n(t,r){function e(t,e,n){var i,o,g,v,d,y,w,m,b,A,E=r.quantizationTable,I=n;for(A=0;A<64;A++)I[A]=t[A]*E[A];for(A=0;A<8;++A){var R=8*A;0!=I[1+R]||0!=I[2+R]||0!=I[3+R]||0!=I[4+R]||0!=I[5+R]||0!=I[6+R]||0!=I[7+R]?(i=l*I[0+R]+128>>8,o=l*I[4+R]+128>>8,g=I[2+R],v=I[6+R],d=p*(I[1+R]-I[7+R])+128>>8,m=p*(I[1+R]+I[7+R])+128>>8,y=I[3+R]<<4,w=I[5+R]<<4,b=i-o+1>>1,i=i+o+1>>1,o=b,b=g*c+v*h+128>>8,g=g*h-v*c+128>>8,v=b,b=d-w+1>>1,d=d+w+1>>1,w=b,b=m+y+1>>1,y=m-y+1>>1,m=b,b=i-v+1>>1,i=i+v+1>>1,v=b,b=o-g+1>>1,o=o+g+1>>1,g=b,b=d*u+m*f+2048>>12,d=d*f-m*u+2048>>12,m=b,b=y*s+w*a+2048>>12,y=y*a-w*s+2048>>12,w=b,I[0+R]=i+m,I[7+R]=i-m,I[1+R]=o+w,I[6+R]=o-w,I[2+R]=g+y,I[5+R]=g-y,I[3+R]=v+d,I[4+R]=v-d):(b=l*I[0+R]+512>>10,I[0+R]=b,I[1+R]=b,I[2+R]=b,I[3+R]=b,I[4+R]=b,I[5+R]=b,I[6+R]=b,I[7+R]=b)}for(A=0;A<8;++A){var T=A;0!=I[8+T]||0!=I[16+T]||0!=I[24+T]||0!=I[32+T]||0!=I[40+T]||0!=I[48+T]||0!=I[56+T]?(i=l*I[0+T]+2048>>12,o=l*I[32+T]+2048>>12,g=I[16+T],v=I[48+T],d=p*(I[8+T]-I[56+T])+2048>>12,m=p*(I[8+T]+I[56+T])+2048>>12,y=I[24+T],w=I[40+T],b=i-o+1>>1,i=i+o+1>>1,o=b,b=g*c+v*h+2048>>12,g=g*h-v*c+2048>>12,v=b,b=d-w+1>>1,d=d+w+1>>1,w=b,b=m+y+1>>1,y=m-y+1>>1,m=b,b=i-v+1>>1,i=i+v+1>>1,v=b,b=o-g+1>>1,o=o+g+1>>1,g=b,b=d*u+m*f+2048>>12,d=d*f-m*u+2048>>12,m=b,b=y*s+w*a+2048>>12,y=y*a-w*s+2048>>12,w=b,I[0+T]=i+m,I[56+T]=i-m,I[8+T]=o+w,I[48+T]=o-w,I[16+T]=g+y,I[40+T]=g-y,I[24+T]=v+d,I[32+T]=v-d):(b=l*n[A+0]+8192>>14,I[0+T]=b,I[8+T]=b,I[16+T]=b,I[24+T]=b,I[32+T]=b,I[40+T]=b,I[48+T]=b,I[56+T]=b)}for(A=0;A<64;++A){var P=128+(I[A]+8>>4);e[A]=P<0?0:P>255?255:P}}for(var n,i,o=[],g=r.blocksPerLine,v=r.blocksPerColumn,d=g<<3,y=new Int32Array(64),w=new Uint8Array(64),m=0;m<v;m++){var b=m<<3;for(n=0;n<8;n++)o.push(new Uint8Array(d));for(var A=0;A<g;A++){e(r.blocks[m][A],w,y);var E=0,I=A<<3;for(i=0;i<8;i++){var R=o[b+i];for(n=0;n<8;n++)R[I+n]=w[E++]}}}return o}function i(t){return t<0?0:t>255?255:t}var o=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),a=4017,s=799,f=3406,u=2276,h=1567,c=3784,l=5793,p=2896;return t.prototype={load:function(t){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){var t=new Uint8Array(r.response||r.mozResponseArrayBuffer);this.parse(t),this.onload&&this.onload()}.bind(this),r.send(null)},parse:function(t){function i(){var r=t[h]<<8|t[h+1];return h+=2,r}function a(){var r=i(),e=t.subarray(h,h+r-2);return h+=e.length,e}function s(t){var r,e,n=0,i=0;for(e in t.components)t.components.hasOwnProperty(e)&&(r=t.components[e],n<r.h&&(n=r.h),i<r.v&&(i=r.v));var o=Math.ceil(t.samplesPerLine/8/n),a=Math.ceil(t.scanLines/8/i);for(e in t.components)if(t.components.hasOwnProperty(e)){r=t.components[e];for(var s=Math.ceil(Math.ceil(t.samplesPerLine/8)*r.h/n),f=Math.ceil(Math.ceil(t.scanLines/8)*r.v/i),u=o*r.h,h=a*r.v,c=[],l=0;l<h;l++){for(var p=[],g=0;g<u;g++)p.push(new Int32Array(64));c.push(p)}r.blocksPerLine=s,r.blocksPerColumn=f,r.blocks=c}t.maxH=n,t.maxV=i,t.mcusPerLine=o,t.mcusPerColumn=a}var f,u,h=0,c=(t.length,null),l=null,p=[],g=[],v=[],d=[],y=i();if(65496!=y)throw"SOI not found";for(y=i();65497!=y;){var w,m;switch(y){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var b=a();65504===y&&74===b[0]&&70===b[1]&&73===b[2]&&70===b[3]&&0===b[4]&&(c={version:{major:b[5],minor:b[6]},densityUnits:b[7],xDensity:b[8]<<8|b[9],yDensity:b[10]<<8|b[11],thumbWidth:b[12],thumbHeight:b[13],thumbData:b.subarray(14,14+3*b[12]*b[13])}),65518===y&&65===b[0]&&100===b[1]&&111===b[2]&&98===b[3]&&101===b[4]&&0===b[5]&&(l={version:b[6],flags0:b[7]<<8|b[8],flags1:b[9]<<8|b[10],transformCode:b[11]});break;case 65499:for(var A=i(),E=A+h-2;h<E;){var I=t[h++],R=new Int32Array(64);if(I>>4===0)for(m=0;m<64;m++){var T=o[m];R[T]=t[h++]}else{if(I>>4!==1)throw"DQT: invalid table spec";for(m=0;m<64;m++){var T=o[m];R[T]=i()}}p[15&I]=R}break;case 65472:case 65473:case 65474:i(),f={},f.extended=65473===y,f.progressive=65474===y,f.precision=t[h++],f.scanLines=i(),f.samplesPerLine=i(),f.components={},f.componentsOrder=[];var P,_=t[h++];for(w=0;w<_;w++){P=t[h];var B=t[h+1]>>4,k=15&t[h+1],U=t[h+2];f.componentsOrder.push(P),f.components[P]={h:B,v:k,quantizationTable:p[U]},h+=3}s(f),g.push(f);break;case 65476:var C=i();for(w=2;w<C;){var S=t[h++],Y=new Uint8Array(16),x=0;for(m=0;m<16;m++,h++)x+=Y[m]=t[h];var L=new Uint8Array(x);for(m=0;m<x;m++,h++)L[m]=t[h];w+=17+x,(S>>4===0?d:v)[15&S]=r(Y,L)}break;case 65501:i(),u=i();break;case 65498:var M,D=(i(),t[h++]),O=[];for(w=0;w<D;w++){M=f.components[t[h++]];var N=t[h++];M.huffmanTableDC=d[N>>4],M.huffmanTableAC=v[15&N],O.push(M)}var X=t[h++],q=t[h++],z=t[h++],F=e(t,h,f,O,u,X,q,z>>4,15&z);h+=F;break;default:if(255==t[h-3]&&t[h-2]>=192&&t[h-2]<=254){h-=3;break}throw"unknown JPEG marker "+y.toString(16)}y=i()}if(1!=g.length)throw"only single frame JPEGs supported";this.width=f.samplesPerLine,this.height=f.scanLines,this.jfif=c,this.adobe=l,this.components=[];for(var w=0;w<f.componentsOrder.length;w++){var M=f.components[f.componentsOrder[w]];this.components.push({lines:n(f,M),scaleX:M.h/f.maxH,scaleY:M.v/f.maxV})}},getData:function(t,r){var e,n,o,a,s,f,u,h,c,l,p,g,v,d,y,w,m,b,A,E,I,R=this.width/t,T=this.height/r,P=0,_=t*r*this.components.length,B=new Uint8Array(_);switch(this.components.length){case 1:for(e=this.components[0],l=0;l<r;l++)for(s=e.lines[0|l*e.scaleY*T],c=0;c<t;c++)p=s[0|c*e.scaleX*R],B[P++]=p;break;case 2:for(e=this.components[0],n=this.components[1],l=0;l<r;l++)for(s=e.lines[0|l*e.scaleY*T],f=n.lines[0|l*n.scaleY*T],c=0;c<t;c++)p=s[0|c*e.scaleX*R],B[P++]=p,p=f[0|c*n.scaleX*R],B[P++]=p;break;case 3:for(I=!0,this.adobe&&this.adobe.transformCode?I=!0:"undefined"!=typeof this.colorTransform&&(I=!!this.colorTransform),e=this.components[0],n=this.components[1],o=this.components[2],l=0;l<r;l++)for(s=e.lines[0|l*e.scaleY*T],f=n.lines[0|l*n.scaleY*T],u=o.lines[0|l*o.scaleY*T],c=0;c<t;c++)I?(p=s[0|c*e.scaleX*R],g=f[0|c*n.scaleX*R],v=u[0|c*o.scaleX*R],b=i(p+1.402*(v-128)),A=i(p-.3441363*(g-128)-.71413636*(v-128)),E=i(p+1.772*(g-128))):(b=s[0|c*e.scaleX*R],A=f[0|c*n.scaleX*R],E=u[0|c*o.scaleX*R]),B[P++]=b,B[P++]=A,B[P++]=E;break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";for(I=!1,this.adobe&&this.adobe.transformCode?I=!0:"undefined"!=typeof this.colorTransform&&(I=!!this.colorTransform),e=this.components[0],n=this.components[1],o=this.components[2],a=this.components[3],l=0;l<r;l++)for(s=e.lines[0|l*e.scaleY*T],f=n.lines[0|l*n.scaleY*T],u=o.lines[0|l*o.scaleY*T],h=a.lines[0|l*a.scaleY*T],c=0;c<t;c++)I?(p=s[0|c*e.scaleX*R],g=f[0|c*n.scaleX*R],v=u[0|c*o.scaleX*R],d=h[0|c*a.scaleX*R],y=255-i(p+1.402*(v-128)),w=255-i(p-.3441363*(g-128)-.71413636*(v-128)),m=255-i(p+1.772*(g-128))):(y=s[0|c*e.scaleX*R],
w=f[0|c*n.scaleX*R],m=u[0|c*o.scaleX*R],d=h[0|c*a.scaleX*R]),B[P++]=y,B[P++]=w,B[P++]=m,B[P++]=d;break;default:throw"Unsupported color mode"}return B},copyToImageData:function(t){var r,e,n,o,a,s,f,u,h,c=t.width,l=t.height,p=t.data,g=this.getData(c,l),v=0,d=0;switch(this.components.length){case 1:for(e=0;e<l;e++)for(r=0;r<c;r++)n=g[v++],p[d++]=n,p[d++]=n,p[d++]=n,p[d++]=255;break;case 3:for(e=0;e<l;e++)for(r=0;r<c;r++)f=g[v++],u=g[v++],h=g[v++],p[d++]=f,p[d++]=u,p[d++]=h,p[d++]=255;break;case 4:for(e=0;e<l;e++)for(r=0;r<c;r++)a=g[v++],s=g[v++],n=g[v++],o=g[v++],f=255-i(a*(1-o/255)+o),u=255-i(s*(1-o/255)+o),h=255-i(n*(1-o/255)+o),p[d++]=f,p[d++]=u,p[d++]=h,p[d++]=255;break;default:throw"Unsupported color mode"}}},t}();t.exports=e}).call(r,e(3).Buffer)}]);</script></body></html>